<!-- Header principal con navegación intuitiva -->
<app-header
  [title]="'IRIX Camera'"
  [subtitle]="cameraState.isActive ? (cameraState.currentCamera === 'rear' ? 'Cámara Trasera' : 'Cámara Frontal') : 'Desactivada'"
  [actions]="headerActions"
  [aiDetections]="aiDetections"
  (actionClick)="onHeaderAction($event)"
></app-header>

<div class="camera-container">
  <!-- Controles superiores (ahora más simples) -->
  <app-camera-controls
    [isActive]="cameraState.isActive"
    [currentCamera]="cameraState.currentCamera"
    [currentZoom]="cameraState.zoomLevel"
    [maxZoom]="cameraState.maxZoom"
    [isZoomSupported]="isZoomSupported"
    (startCamera)="startCamera()"
    (stopCamera)="stopCamera()"
    (flipCamera)="flipCamera()"
    (showInfo)="getDetailedCameraInfo()"
    (captureImage)="captureHighQuality()"
  ></app-camera-controls>

  <!-- Vista previa de la cámara -->
  <app-camera-preview
    [isActive]="cameraState.isActive"
    (touchFocus)="onCameraTouch($event)"
  ></app-camera-preview>

  <!-- Overlay de detección de IA superpuesto sobre la cámara -->
  <app-ai-detection-overlay
    [isActive]="cameraState.isActive"
  ></app-ai-detection-overlay>

  <!-- Modal de información de la cámara -->
  <app-camera-info-display
    [cameraInfo]="cameraInfo"
    [isOpen]="infoModalOpen"
  ></app-camera-info-display>
</div>

<!-- Tabla de detecciones de IA -->
<app-ai-detections-table
  [isVisible]="showAiTable"
  [detectionHistory]="detectionHistory"
></app-ai-detections-table>
