<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Cámara en Tiempo Real </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Cámara en Tiempo Real</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="camera-container">
    <!-- Controles superiores -->
    <div class="top-controls">
      <ion-button
        expand="block"
        color="primary"
        (click)="cameraActive ? stopCamera() : startCamera()"
      >
        <ion-icon name="camera" slot="start"></ion-icon>
        {{ cameraActive ? 'Detener Cámara' : 'Iniciar Cámara' }}
      </ion-button>

      <ion-button expand="block" color="secondary" (click)="showCameraInfo()">
        <ion-icon name="information-circle" slot="start"></ion-icon>
        Información de la Cámara
      </ion-button>
    </div>

    <!-- Vista de la cámara con táctil -->
    <div
      id="cameraPreview"
      class="camera-preview"
      (touchstart)="onCameraTouch($event)"
      [class.camera-inactive]="!cameraActive"
    >
      <!-- Indicador de enfoque -->
      <div class="focus-indicator" *ngIf="cameraActive">
        <p>Toca para enfocar</p>
      </div>

      <!-- Mensaje cuando la cámara está inactiva -->
      <div class="camera-placeholder" *ngIf="!cameraActive">
        <ion-icon name="camera-outline" size="large"></ion-icon>
        <p>Presiona "Iniciar Cámara" para comenzar</p>
      </div>
    </div>

    <!-- Controles inferiores -->
    <div class="bottom-controls" *ngIf="cameraActive">
      <div class="control-row actions">
        <ion-button color="medium" (click)="flipCamera()">
          <ion-icon name="camera-reverse" slot="start"></ion-icon>
          Cambiar
        </ion-button>
      </div>

      <!-- Indicadores -->
      <div class="control-row indicators">
        <span class="indicator"
          >{{ currentCamera === 'rear' ? 'Trasera' : 'Frontal' }}</span
        >
        <span class="indicator">HD</span>
        <span class="indicator" *ngIf="isZoomSupported"
          >Zoom: {{ currentZoom }}x/{{ maxZoom }}x</span
        >
      </div>
    </div>
  </div>
</ion-content>
